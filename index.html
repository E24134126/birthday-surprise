<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>loading...</title>
<style>
  :root {
    --primary-color: #4A5568; 
    --accent-color: #2D3748;
    --bg-color: #E2E8F0;
    --card-bg: #FFFFFF;
    --font-main: 'Courier New', monospace;
  }

  /* æº«é¦¨å›é¡§ä¸»é¡Œ */
  body.birthday-theme {
    --primary-color: #7D5A50;
    --accent-color: #E58E26;
    --bg-color: #FAF5EB;
    --card-bg: rgba(255, 255, 255, 0.95);
    --font-main: 'Helvetica Neue', 'PingFang TC', sans-serif;
    transition: background-color 1.5s ease;
  }

  body { 
    font-family: var(--font-main);
    background-color: var(--bg-color);
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    overflow: hidden;
  }

  /* èƒŒæ™¯è£é£¾ */
  .decoration {
    position: fixed;
    bottom: -100px;
    opacity: 0.6;
    z-index: -1;
    display: none;
    animation: floatUp 10s infinite ease-in;
  }
  @keyframes floatUp {
    0% { transform: translateY(0) rotate(0deg); opacity: 0; }
    20% { opacity: 0.6; }
    100% { transform: translateY(-120vh) rotate(15deg); opacity: 0; }
  }

  .container {
    background: var(--card-bg);
    padding: 40px 25px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    width: 90%;
    max-width: 420px;
    text-align: center;
    z-index: 10;
    border: 1px solid #CBD5E0;
    transition: all 1s ease;
  }

  #title { font-size: 20px; color: var(--primary-color); margin-bottom: 10px; height: 80px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
  #countdown { font-size: 30px; font-weight: bold; color: var(--accent-color); margin: 15px 0; height: 60px; min-width: 280px; display: inline-flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.03); border-radius: 8px; }
  #hint { font-size: 12px; color: #718096; height: 20px; margin-bottom: 10px; }
  
  #videoLink { display: none; width: 100%; opacity: 0; transition: opacity 1s ease; }
  video { width: 100%; max-height: 60vh; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); background: #000; }

  /* å¯†ç¢¼å±¤ */
  #passwordOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #1A202C; display: flex; justify-content: center; align-items: center; z-index: 999; }
  #passwordBox { background: #EDF2F7; padding: 35px; border-radius: 8px; text-align: center; width: 85%; max-width: 320px; border: 1px solid #A0AEC0; }
  #pwInput { width: 100%; padding: 12px; margin: 20px 0; border: 1px solid #A0AEC0; font-size: 16px; text-align: center; outline: none; text-transform: uppercase; }
  #pwSubmit { background: #4A5568; color: white; border: none; padding: 12px; cursor: pointer; width: 100%; font-weight: bold; }
  #startBtn { display: none; padding: 15px 45px; font-size: 18px; background: #4A5568; border: none; color: white; cursor: pointer; border-radius: 4px; font-weight: bold; }

  .num-animate { animation: numStep 0.3s ease-out; }
  @keyframes numStep { 0% { transform: scale(0.8); opacity: 0.5; } 100% { transform: scale(1); opacity: 1; } }
</style>
</head>
<body id="bodyTag">

<div id="decorations"></div>

<div id="passwordOverlay">
  <div id="passwordBox">
    <h3 style="color: #2D3748; margin:0; font-family: monospace;">ACCESS CONTROL</h3>
    <p id="pwSubText" style="color:#718096; font-size: 12px; margin-top: 8px;">NODE_03: SECURITY VALIDATION</p>
    <input id="pwInput" type="text" placeholder="ACCESS CODE">
    <button id="pwSubmit">AUTHENTICATE</button>
    <div id="pwHint" style="margin-top:15px; color:#A0AEC0; font-size: 11px;">[System]: Waiting for entry.</div>
  </div>
</div>

<div class="container" id="mainContainer">
  <div id="title">INITIALIZING...</div>
  <div id="hint">SYNC_STATUS: PENDING</div>
  <div id="countdown">--:--:--:--</div>
  <div id="actionArea"><button id="startBtn">EXECUTE_STREAM</button></div>
  <div id="videoLink">
    <video controls id="birthdayVideo" preload="auto">
      <source src="video.mp4" type="video/mp4">
    </video>
    <p id="videoFooter" style="margin-top:20px; color: var(--primary-color); font-weight:bold;">Happy Birthday to è¾°å°‘çˆº âœ¨</p>
  </div>
</div>

<script>
// --- [ è¨­å®šå€åŸŸ ] ---
const birthdayDate = new Date(2026, 0, 3); // 1æœˆ3æ—¥
const correctPassword = "JAN03"; 

const titleEl = document.getElementById("title");
const countdownEl = document.getElementById("countdown");
const startBtn = document.getElementById("startBtn");
const overlay = document.getElementById("passwordOverlay");
const hintBox = document.getElementById("pwHint");
const bodyTag = document.getElementById("bodyTag");
let statusInterval; 
let wrongCount = 0;

// 1. å¯†ç¢¼é©—è­‰é‚è¼¯
document.getElementById("pwSubmit").addEventListener("click", function(){
  const input = document.getElementById("pwInput").value.trim().toUpperCase();
  const now = new Date();
  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
  
  const isBirthday = (today.getTime() === birthdayDate.getTime());
  const isAfterBirthday = (today.getTime() > birthdayDate.getTime());

  if(input === correctPassword){
    overlay.style.opacity = "0";
    setTimeout(() => { 
      overlay.style.display = "none"; 
      if(isAfterBirthday) {
        showRetrospective(); // ç”Ÿæ—¥å¾Œç›´æ¥é€²å…¥å›é¡§
      } else {
        startMainLogic(); 
      }
    }, 500);
  } else {
    // éŒ¯èª¤æç¤ºé‚è¼¯
    if(today < birthdayDate){
      const fakes = ["Error 403: æ¬Šé™å°šæœªé–‹æ”¾","Error 505: ç³»çµ±ç›®å‰é–å®š","Error 999: ç„¡æ•ˆçš„å­˜å–ç¢¼"];
      hintBox.innerText = fakes[Math.floor(Math.random()*fakes.length)];
    } else {
      const reals = ["æç¤ºï¼šæœˆä»½è‹±æ–‡(ä¸‰ç¢¼) + æ—¥æœŸ", "æç¤ºï¼šJANXX", "å¯†ç¢¼å°±æ˜¯ã€ŒJAN03ã€"];
      hintBox.innerText = reals[Math.min(wrongCount, reals.length-1)];
      wrongCount++;
    }
    document.getElementById("pwInput").value = "";
  }
});

function startMainLogic() {
  updateStatus();
  statusInterval = setInterval(updateStatus, 1000); 
}

// 2. æ›´æ–°ä¸»ç•«é¢ç‹€æ…‹
function updateStatus() {
  const now = new Date();
  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

  if(today < birthdayDate){
    const diff = birthdayDate - now;
    const days = Math.floor(diff / (1000*60*60*24));
    const h = Math.floor((diff % (1000*60*60*24))/(1000*60*60)).toString().padStart(2,'0');
    const m = Math.floor((diff % (1000*60*60))/(1000*60)).toString().padStart(2,'0');
    const s = Math.floor((diff % (1000*60))/1000).toString().padStart(2,'0');
    titleEl.innerHTML = "SYSTEM DATA SYNCING...";
    countdownEl.innerHTML = `T-${days}:${h}:${m}:${s}`;
  } 
  else if(today.getTime() === birthdayDate.getTime()){
    titleEl.innerHTML = "DATA PACK READY.";
    document.getElementById("hint").innerHTML = "DATE CHECK: 01-03 SUCCESS";
    countdownEl.innerHTML = "READY";
    startBtn.style.display = "inline-block";
  }
}

// 3. å›é¡§æ¨¡å¼ (ç”Ÿæ—¥å¾Œ)
function showRetrospective() {
  bodyTag.classList.add("birthday-theme");
  document.title = "å›é¡§æ™‚åˆ» ğŸ¬";
  titleEl.innerHTML = "å›é¡§é©šå–œæ™‚åˆ» ğŸ¬";
  countdownEl.style.display = "none";
  document.getElementById("hint").style.display = "none";
  document.getElementById("videoFooter").innerHTML = "æ°¸é çè—é€™ä»½å›æ†¶ â¤ï¸";
  
  startDecorations();
  const videoContainer = document.getElementById("videoLink");
  videoContainer.style.display = "block";
  setTimeout(() => { videoContainer.style.opacity = 1; }, 50);
}

// 4. æœ€å¾Œå€’æ•¸ (10ç§’)
startBtn.addEventListener("click", function(){
  clearInterval(statusInterval);
  startBtn.style.display = "none";
  let count = 10;
  titleEl.innerHTML = "æ­£åœ¨è§£ç¢¼åŠ å¯†æª”æ¡ˆ...";
  countdownEl.innerHTML = `<span class="num-animate">${count}</span>`;

  const finalTimer = setInterval(function(){
    count--;
    if (count < 0) { clearInterval(finalTimer); showVideo(); return; }
    countdownEl.innerHTML = `<span class="num-animate">${count}</span>`;

    if (count === 5) {
      bodyTag.classList.add("birthday-theme"); 
      document.title = "Happy Birthday! âœ¨";
      titleEl.style.opacity = 0;
      setTimeout(() => {
        titleEl.innerHTML = "è§£é–æˆåŠŸï¼è¾°å°‘çˆºç”Ÿæ—¥å¿«æ¨‚ âœ¨";
        titleEl.style.opacity = 1;
      }, 400);
      document.getElementById("mainContainer").style.borderRadius = "30px";
      startDecorations(); 
    }
  }, 1000);
});

function startDecorations() {
  const decor = document.getElementById('decorations');
  const emojis = ['ğŸˆ', 'ğŸ­', 'â­', 'ğŸ‚', 'ğŸ’–', 'ğŸ‰'];
  setInterval(() => {
    const span = document.createElement('span');
    span.className = 'decoration';
    span.style.display = 'block';
    span.innerText = emojis[Math.floor(Math.random()*emojis.length)];
    span.style.left = Math.random()*100 + 'vw';
    span.style.fontSize = (Math.random()*20+20)+'px';
    decor.appendChild(span);
    setTimeout(() => span.remove(), 10000);
  }, 700);
}

function showVideo() {
  titleEl.style.display = "none"; countdownEl.style.display = "none";
  document.getElementById("hint").style.display = "none";
  document.getElementById("actionArea").style.display = "none";
  const videoContainer = document.getElementById("videoLink");
  videoContainer.style.display = "block";
  setTimeout(() => { videoContainer.style.opacity = 1; }, 50);
}
</script>

</body>
</html>
